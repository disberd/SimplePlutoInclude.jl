# SimplePlutoInclude

<!-- [![Stable](https://img.shields.io/badge/docs-stable-blue.svg)](https://disberd.github.io/SimplePlutoInclude.jl/)
[![Dev](https://img.shields.io/badge/docs-dev-blue.svg)](https://disberd.github.io/SimplePlutoInclude.jl/dev) -->
[![Build Status](https://github.com/disberd/SimplePlutoInclude.jl/actions/workflows/CI.yml/badge.svg?branch=main)](https://github.com/disberd/SimplePlutoInclude.jl/actions/workflows/CI.yml?query=branch%3Amain)
[![Coverage](https://codecov.io/gh/disberd/SimplePlutoInclude.jl/branch/main/graph/badge.svg)](https://codecov.io/gh/disberd/SimplePlutoInclude.jl)
[![Aqua QA](https://raw.githubusercontent.com/JuliaTesting/Aqua.jl/master/badge.svg)](https://github.com/JuliaTesting/Aqua.jl)

This packages exports a single macro `@plutoinclude` which is a simplified version of the `@plutoinclude` macro which was exported by [PlutoDevMacros.jl](https://github.com/disberd/PlutoDevMacros.jl) up to version v0.7.

This macro tries to simplify the process of __including__ a julia file inside a Pluto notebook with the possibility of __reloading__ the file once its contents are updated.
The target file can be any valid julia file (including another Pluto notebook), and this macro simply performs the following steps:
1. Create an empty temporary module inside the caller module
2. Include the target file within the temporary module
3. Explicitly imports the _names_ defined in the __included__ file in the current Pluto workspace

> [!NOTE]
> The temporary module is created during macro expansion time in order to be able to extract the names and explicitly import them in the expression generated by the macro.

> [!IMPORTANT]
> Any package that is imported or used within the included file must also be present in the environment of the notebook calling the `@plutoinclude` macro. This macro tries to be as simple as possible and does not handles the environment of the included file. For more complex cases, consider using the other macros defined in [PlutoDevMacros.jl](https://github.com/disberd/PlutoDevMacros.jl)

## Specifying the file to include
The path to the file to be included can be specified either as a plain `String`, or as any expression that will evaluate to a String in the caller module (i.e. the Pluto workspace where the `@plutoinclude` macro is called).
> [!WARNING]
> When specifying the path as an expression depending on variables/functions defined in the notebook itself, the behavior of the `@plutoinclude` macro might behave strangely as the code loading is happening during macro expansion. The following two _strange_ behaviors are important to know:
> - Item1
> - Item2

## Customizing imported names
The names to be introduced into the Pluto workspace are simply extracted from the temporary module using functions `Base.names`